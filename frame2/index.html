<title>Border Frames</title>
<link rel="stylesheet" href="/style.css" />
<meta name="viewport" content="initial-scale = 1.0,maximum-scale = 1.0" />
<script src="/index.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js@2.8.0"></script>
<script src="https://d3js.org/d3.v4.min.js"></script>




<code>
<h1>Frame II</h1> 

<nav><a href="/">Home</a></nav> 


<h2>Frames</h2>
<a href="/frame1">Frame I</a>
<a href="/frame2">Frame II</a>
<a href="/frame3">Frame III</a>


<canvas id="natChart" width="500" height="500">
<script>
	d3.json("./data.json", function(data) {
		// load data with d3.json function (returns object) --> parse data in callback function
        let nationality = [];
        for (let i = 0; i < data.length; i++) {
            nationality.push(data[i].nationality)
            }
		// push nationalities into array (incl. doubles) --> create new set to get rid of doubles
        let labelNation = Array.from(new Set(nationality));
        let numOfNationals = [];
		// count how many times a given nationality is found in the original array
        for (let i = 0; i < labelNation.length; i++) {
            numOfNationals.push(nationality.filter(nat => nat === labelNation[i]).length)
        };
		// create charts using chart.js syntax
		const ctx = document.getElementById('natChart');
		const myChart = new Chart(ctx, {
			type: 'bar',
			data: {
				// x-axis
				labels: labelNation,
				datasets: [{
					// y-axis
					label: 'People in Immigration Detention (January - June 2020)',
					data: numOfNationals,
					backgroundColor: 'rgba(144, 119, 111, 0.4)',
					borderColor: 'rgba(144, 119, 111, 1)',
					borderWidth: 0.5,
					barThickness: 'flex',
				}]
			},
			options: {
				labels: {
				},
				scales: {
					yAxes: [{
						ticks: {
							beginAtZero: true,
						}
					}]
				}
			}
		});
	});
	</script>
</canvas>

<canvas id="durationChart" width="500" height="500">
	<script>
		d3.json("./data.json", function(data) {
			let durations = [];
			for (let i = 0; i < data.length; i++) {
            	durations.push(data[i].duration)
            }
			
			const labelDuration = ["up to 4 days", 
									"up to two weeks", 
									"up to one month", 
									"up to three months", 
									"more than three months"
									]
			let a = 0; // 1 - 4 days
			let b = 0; // 5 - 14 days
			let c = 0; // 15 - 31 days
			let d = 0; // 32 - 93 days
			let e = 0; // more than 94 days (over 3 months)

			let total = 0;

			for (let i = 0; i < durations.length; i++) {
				let dur = durations[i];
				total += dur;
				if (dur < 5) {
					a++
				} else if (dur < 15) {
					b++
				} else if (dur < 31) {
					c++
				} else if (dur < 93) {
					d++
				} else {
					e++
				};
			};
			const detaineesPerDuration = [a, b, c, d, e]
			const averageDuration = total / durations.length

			// create charts using chart.js syntax
			const ctx = document.getElementById('durationChart');
			const myChart = new Chart(ctx, {
				type: 'bar',
				data: {
					// x-axis
					labels: labelDuration,
					datasets: [{
						// y-axis
						label: 'Number of Detainees by Detention Duration (up to June 2020)',
						data: detaineesPerDuration,
						backgroundColor: 'rgba(144, 119, 111, 0.4)',
						borderColor: 'rgba(144, 119, 111, 1)',
						borderWidth: 0.5,
						barThickness: 'flex',
					}]
				},
				options: {
					labels: {
					},
					scales: {
						yAxes: [{
							ticks: {
								beginAtZero: true,
							}
						}]
					}
				}
			});
		});
		</script>
		
	</canvas>
<a href="https://www.parlament.gv.at/PAKT/VHG/XXVII/AB/AB_02504_U1/index.shtml" target="_blank">Source</a>



</code>